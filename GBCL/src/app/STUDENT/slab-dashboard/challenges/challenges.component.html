<div class="container-fluid">







  <!-- -------------------------------------------------------------------------------------- -->
  <!-- TOP ROW STARTS, in a [container-fluid]-->
  <!-- ----------------------------------------------------------------------------------------->

  <div class="row">
    <div class="col-12 maTopRow ">
      <!-- this column isfurther divided into three portions -->
      <!-- first portion for logo -->
      <!-- second portion for Student Stats -->
      <!-- third portion for Logout n student name -->
      <!-- <div class="row text-center">
              <div class="col-12 col-sm-3 col-md-2 bg-success">LOGO</div>
              <div class="col-12 col-sm-6 col-md-8 bg-primary">Stats</div>
              <div class="col-12 col-sm-3 col-md-2 bg-secondary">logout n profile</div>
          </div> -->
      <div class="row text-center">

        <!-- ---------------- -->
        <!-- GBCL LOGO COLUMN -->

        <div class="col-12 col-sm-3 col-md-2 bgYellowOnHover">
          <a class="btn w-100  border border-warning" [routerLink]="'/STUDENT/Lab'"
            title="Gamification Based Coding Labs"><img src="../../assets/images/logo.png" alt="logo"
              id="logoImg"><b>GBCL</b></a>
        </div>

        <!-- GBCL LOGO COLUMN-END -->
        <!-- -------------------- -->






        <!-- ----------- -->
        <!-- Stats column -->
        <div class="col-12 col-sm-4 col-md-5 border rounded text-left h-100 m-auto p-2 text-center">
          <h5><b>Challenges Window</b></h5>
        </div>
        <!-- Stats column -->
        <div class="col-12 col-sm-2 col-md-3 border rounded text-left h-100 m-auto p-2 text-center">
          <h5 class="text-warning">{{XPplusplusOrminusminus}}</h5>
          <!-- <h5 class="text-warning" *ngIf="UNCHANGED_STATS == 0">Unchanged Stats</h5>
          <h5 class="text-warning" *ngIf="UNCHANGED_STATS > 0">{{CHANGED_XP+' XPs ++'}}</h5>
          <h5 class="text-warning" *ngIf="UNCHANGED_STATS < 0">{{CHANGED_XP+' XPs --'}}</h5> -->
        </div>
        <!-- STATS COL END -->
        <!-- ------------- -->




        <!-- ---------- -->
        <!-- LOGOUT COL -->
        <div class="col-12 col-sm-3 col-md-2">
          <div class="row">
            <div class="col-12 btn-group">
              <!-- Example single danger button -->

              <button type="button" class="btn btn-warning mt-4 maSmallerFonts dropdown-toggle" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                {{localStorageUsername}}
              </button>
              <div class="dropdown-menu bg-warning">
                <a class="dropdown-item" [routerLink]="'/STUDENT/Lab/'">Dashboard</a>
                <a class="dropdown-item" [routerLink]="'/STUDENT/Lab/AllLabs'">Attempt Lab Tasks</a>
                <a class="dropdown-item" [routerLink]="'/STUDENT/Lab/Challenges'">Attempt Challenges</a>
                <a class="dropdown-item" [routerLink]="'/STUDENT/Lab/Rivals'">Rivals</a>
                <a class="dropdown-item" [routerLink]="'/STUDENT/Lab/Leaderboard'">Leaderboard</a>                <button type="button" class="btn btn-outline-danger w-100 ml-0" (click)="onExitLabClicked()">Exit
                  Lab</button>
                <div class="dropdown-divider"></div>
                <button type="button" class="btn btn-outline-danger w-100 ml-0" (click)="onLogout()">Logout</button>



              </div>

            </div>

          </div>
        </div>
        <!-- LOGOUT COL ENDS-->
        <!-- ----------------->

      </div>

    </div>
    <hr class="bg-warning p-0 m-0">

  </div>
  <!--1st row ends-->
  <!-- -------------------------------------------------------------------------------------- -->
  <!-- TOP ROW ENDS-->
  <!-- ----------------------------------------------------------------------------------------->

  <div class="row">
    <div class="col-12">
      <!-- <button (click)='startTimer()'>Start Timer</button>
<button (click)='pauseTimer()'>Pause</button> -->


      <div class="row text-center text-warning bg-dark" *ngIf="!SHOW_CHALLENGE_RELATED_DIVS">
        <div class="col-sm-8 p-2">
          <h2>No Challenges!</h2>
          <!-- <h2>{{unAttemptedChallenges[0].ChallengeQuestion}}</h2> -->

        </div>
      </div>
      <div class="row text-center text-warning bg-dark">
        <div class="col-sm-8 p-2">
          <h2 *ngIf="SHOW_CHALLENGE_RELATED_DIVS">{{unAttemptedChallenges[this.i]?.ChallengeQuestionType}}</h2>
          <!-- <h2>{{unAttemptedChallenges[0].ChallengeQuestion}}</h2> -->

        </div>
        <div class="col-sm-4 my-auto"> <span *ngIf="SHOW_CHALLENGE_RELATED_DIVS">{{timeLeft}} Seconds Left</span></div>
      </div>
      <form (submit)="onSubmitChallenge(ChallengesForm)" name="challengesForm" #ChallengesForm="ngForm">
        <div class="row">

          <div class="col-sm-8 bg-light rounded pt-4 pl-5 minHeight40vh">
            <h5 *ngIf="!SHOW_CHALLENGE_RELATED_DIVS">Either you have completed all challenges or no challenges are yet
              assigned to this lab</h5>

            <div *ngIf="SHOW_CHALLENGE_RELATED_DIVS">
              <h4 *ngIf="this.i<this.unAttemptedChallenges?.length">Question {{this.i+1}} of
                {{this.unAttemptedChallenges?.length}}:</h4>




                <pre *ngIf="SHOW_CHALLENGE_RELATED_DIVS">{{unAttemptedChallenges[this.i]?.ChallengeQuestion}} </pre>



                <!-- display_txt.replace(/\n/g, "<br />"); -->



<!--
                <div *ngIf="this.i<this.unAttemptedChallenges?.length">
                  <div class="form-group p-0 m-0" *ngIf="unAttemptedChallenges[this.i]?.ChallengeQuestionType != 'MCQ'">
                    <textarea class="form-control m-0" name="theAnswer" ngModel
                      spellcheck="false" disabled rows="4" cols="60"  [(ngModel)]="this.unAttemptedChallenges[this.i].ChallengeQuestion" ></textarea>
                  </div>
                  <div class="form-group p-0 m-0" *ngIf="unAttemptedChallenges[this.i]?.ChallengeQuestionType == 'MCQ'">
                    <div *ngIf="SHOW_CHALLENGE_RELATED_DIVS">{{unAttemptedChallenges[this.i]?.ChallengeQuestion}} </div>


                  </div>

                </div> -->















              <div *ngIf="unAttemptedChallenges[this.i]?.ChallengeQuestionType == 'MCQ'">


                <div class="form-check">
                  <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="optradio"
                      [value]="unAttemptedChallenges[this.i]?.ChallengeOptionA" (change)="radioChangedHandler($event)">
                    {{unAttemptedChallenges[this.i]?.ChallengeOptionA}}
                  </label>
                </div>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="optradio"
                      [value]="unAttemptedChallenges[this.i]?.ChallengeOptionB" (change)="radioChangedHandler($event)">
                    {{unAttemptedChallenges[this.i]?.ChallengeOptionB}}
                  </label>
                </div>
                <div class="form-check disabled">
                  <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="optradio"
                      [value]="unAttemptedChallenges[this.i]?.ChallengeOptionC" (change)="radioChangedHandler($event)">
                    {{unAttemptedChallenges[this.i]?.ChallengeOptionC}}
                  </label>
                </div>
                <div class="form-check disabled">
                  <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="optradio"
                      [value]="unAttemptedChallenges[this.i]?.ChallengeOptionD" (change)="radioChangedHandler($event)">
                    {{unAttemptedChallenges[this.i]?.ChallengeOptionD}}
                  </label>
                </div>
                <!-- <input class="form-check-input" type="radio" value="dog"
                 name="gob" value="i" [checked]="true"
                (change)="onItemChange($event.target.value)"/> -->

                <!-- a. {{unAttemptedChallenges[this.i]?.ChallengeOptionA}} <br>
              b. {{unAttemptedChallenges[this.i]?.ChallengeOptionB}} <br>
              c. {{unAttemptedChallenges[this.i]?.ChallengeOptionC}} <br>
              d. {{unAttemptedChallenges[this.i]?.ChallengeOptionD}} <br> -->
              </div>
              <div *ngIf="this.i<this.unAttemptedChallenges?.length">
                <div class="form-group p-0 m-0" *ngIf="unAttemptedChallenges[this.i]?.ChallengeQuestionType != 'MCQ'">
                  <textarea class="form-control m-0" name="theAnswer" ngModel
                    (keyup)="checkNonMCQAnswer(ChallengesForm.value.theAnswer)" spellcheck="false"
                    placeholder="** Required **  Write your answer here..." rows="4" cols="60"></textarea>
                </div>

              </div>

            </div>
          </div>
          <div class="col-sm-4">

            <div class="container border border-warning rounded mt-1 text-light">
              <h5 class="text-center">Current Stats</h5>
            </div>
            <div class="container border border-warning rounded text-light">

              <p class="mt-1">Current XPs: <span>{{CURRENT_XPs}}</span></p>

              <p class="mct-1">Current Level: <span>{{CURRENT_LEVEL}}</span></p>
              <p class="mct-1">XPs required for promotion: <span>{{XPs_FOR_PROMOTION}}</span> </p>
              <p class="mct-1">Current Badge: <span>{{CURRENT_BADGE}}</span> </p>
              <p class="mct-1">Next Badge: <span>{{NEXT_BADGE}}</span> </p>



            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-8 mt-1">
            <button type="submit" [disabled]="this.unAttemptedChallenges.length==0 || this.Errors.emptyField.status"
              class="btn btn-small px-4 float-right btn-outline-warning">Submit
              Challenge</button>
            <!-- <button class="btn btn-small px-4 float-right btn-outline-warning mr-1" (click)="takeHint()">take hint</button> -->
          </div>
        </div>
        <div class="row">
          <div class="col-9">
            <small class="form-text alert alert-success" *ngIf="this.Errors.ChallengePassed.status">
              {{this.Errors.ChallengePassed.message}}
            </small>
            <small class="form-text alert alert-danger" *ngIf="this.Errors.ChallengeFailed.status">
              {{this.Errors.ChallengeFailed.message}}
            </small>
            <small class="form-text alert alert-success" *ngIf="this.Errors.ChallengeSubmitted.status">
              {{this.Errors.ChallengeSubmitted.message}}
            </small>


          </div>
        </div>
      </form>
    </div>
  </div>


































  <div class="modal" id="demotionModallll" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content bg-dark errorMessageModal">
        <div class="modal-header">
          <h5 class="modal-title errorMessageModal font16">{{MODAL_HEADING}}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body font16">
          <small>{{MODAL_MESSAGE}}</small>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <button type="button" id="LevelUpdatedModalButton" class="d-none" #modalButton data-toggle="modal"
    data-target="#demotionModallll">

  </button>

      <!-- LOADING MODEL -->
      <div *ngIf="showSpinner">
        <div id="opaque" class="d-block"></div>
        <div id="spinner" class="loader"></div>
      </div>
